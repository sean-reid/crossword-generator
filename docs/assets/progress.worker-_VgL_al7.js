let e=null,m=0,t=1e3,a=0,n=0;self.onmessage=T=>{const{type:d,payload:l}=T.data;switch(d){case"START":m=Date.now(),t=l.estimatedTime||1e3,a=0,n=0,e&&clearInterval(e),e=setInterval(()=>{const c=Date.now(),i=c-m;let s,o;if(a===0)s=Math.min(30,i/t*100),o=i<1e3?"Starting...":"Encoding constraints...";else{const r=c-a,g=n+r;s=Math.min(95,g/t*100),o=r<(t-n)*.8?"Solving SAT problem...":"Extracting solution..."}self.postMessage({type:"UPDATE",percent:Math.floor(s),stage:o,elapsed:i,estimated:t})},100);break;case"UPDATE_ESTIMATE":l.actualEncodingTime!==void 0&&(n=l.actualEncodingTime,a=Date.now()),t=l.estimatedTime;break;case"STOP":e&&(clearInterval(e),e=null),a=0,n=0;break}};
